// src/components/TestSection.jsx
import React, { useState } from "react";
import "./TestSection.css";

export default function TestSection() {
  const [activeCategory, setActiveCategory] = useState(null);
  const [activeSubcategory, setActiveSubcategory] = useState(null);

  // üìö Estructura fiel al E.book (7 categor√≠as ‚Äî 105 prompts)
  const testPrompts = [
    // 1Ô∏è‚É£ An√°lisis Financiero Estrat√©gico
    {
      title: "üìä An√°lisis Financiero Estrat√©gico",
      subcategories: [
        {
          title: "Evaluaci√≥n Financiera",
          prompts: [
            "Realiza un an√°lisis de rentabilidad con base en los estados financieros del √∫ltimo a√±o.",
            "Eval√∫a la salud financiera de una empresa considerando liquidez, endeudamiento y eficiencia operativa.",
            "Genera un resumen de KPIs financieros con recomendaciones para optimizar el desempe√±o."
          ]
        },
        {
          title: "Proyecciones y Escenarios",
          prompts: [
            "Dise√±a una proyecci√≥n financiera a 3 a√±os considerando ventas, gastos e inversiones.",
            "Elabora escenarios financieros con supuestos variables y analiza el impacto en resultados.",
            "Calcula la sensibilidad de los ingresos frente a cambios en precios o volumen de ventas."
          ]
        },
        {
          title: "Gesti√≥n de Liquidez",
          prompts: [
            "Construye un flujo de caja mensual estimado para el pr√≥ximo a√±o.",
            "Dise√±a un control de tesorer√≠a para administrar ingresos, egresos y saldos bancarios.",
            "Redacta una pol√≠tica interna para optimizar la gesti√≥n de liquidez y fondos disponibles."
          ]
        },
        {
          title: "Planeaci√≥n Presupuestal",
          prompts: [
            "Elabora un presupuesto maestro integrando ventas, gastos y flujo de caja.",
            "Crea un an√°lisis de desviaciones entre resultados reales y presupuestos.",
            "Eval√∫a los supuestos utilizados en el presupuesto para medir su realismo."
          ]
        },
        {
          title: "Valoraci√≥n y Rentabilidad",
          prompts: [
            "Aplica el m√©todo de flujos descontados para valorar una empresa.",
            "Calcula el ROI de un proyecto espec√≠fico.",
            "Eval√∫a los beneficios financieros frente a los costos asociados de una decisi√≥n empresarial."
          ]
        }
      ]
    },

    // 2Ô∏è‚É£ Comunicaci√≥n Empresarial
    {
      title: "üí¨ Comunicaci√≥n Empresarial",
      subcategories: [
        {
          title: "Informes Ejecutivos",
          prompts: [
            "Redacta un informe financiero claro para directivos.",
            "Prepara un resumen ejecutivo con los logros del trimestre.",
            "Resume resultados clave y decisiones estrat√©gicas recientes."
          ]
        },
        {
          title: "Comunicaci√≥n con Clientes",
          prompts: [
            "Redacta un bolet√≠n con novedades contables y financieras relevantes.",
            "Escribe una carta con logros y proyecciones del negocio.",
            "Prepara un resumen de resultados dirigido a clientes corporativos."
          ]
        },
        {
          title: "Gesti√≥n de Crisis",
          prompts: [
            "Redacta un comunicado transparente y profesional ante una crisis.",
            "Dise√±a pautas para mantener coherencia comunicativa durante contingencias.",
            "Crea un plan de mitigaci√≥n de impactos comunicativos en una crisis."
          ]
        },
        {
          title: "Relaciones P√∫blicas",
          prompts: [
            "Redacta una nota de prensa sobre resultados anuales.",
            "Elabora un discurso inspirador para presentaci√≥n de resultados.",
            "Crea un mensaje oficial sobre un nuevo logro o meta alcanzada."
          ]
        },
        {
          title: "Documentaci√≥n Interna",
          prompts: [
            "Crea un manual de estilo financiero.",
            "Dise√±a una estructura base para presentaciones ejecutivas.",
            "Define pautas de redacci√≥n profesional en informes contables."
          ]
        }
      ]
    },

    // 3Ô∏è‚É£ Propuestas y Cotizaciones
    {
      title: "üíº Propuestas y Cotizaciones",
      subcategories: [
        {
          title: "Propuestas Comerciales",
          prompts: [
            "Redacta una propuesta para servicios contables profesionales.",
            "Crea una propuesta para consultor√≠a financiera personalizada.",
            "Escribe una carta introductoria para captar nuevos clientes."
          ]
        },
        {
          title: "Cotizaciones Detalladas",
          prompts: [
            "Crea una cotizaci√≥n con precios y plazos claros.",
            "Desarrolla una tabla comparativa entre tres planes de servicio.",
            "Genera una cotizaci√≥n r√°pida con formato profesional."
          ]
        },
        {
          title: "Negociaci√≥n y Cierre",
          prompts: [
            "Redacta argumentos s√≥lidos para cerrar una venta.",
            "Escribe un correo de seguimiento tras una propuesta.",
            "Crea una carta de agradecimiento posterior a una negociaci√≥n."
          ]
        },
        {
          title: "Alcance y Entregables",
          prompts: [
            "Describe claramente los l√≠mites y entregables del servicio.",
            "Crea un calendario de entregas con hitos clave.",
            "Incluye un resumen de condiciones comerciales en tu propuesta."
          ]
        },
        {
          title: "Formalizaci√≥n y Seguimiento",
          prompts: [
            "Redacta una versi√≥n breve de contrato para servicios profesionales.",
            "Genera un documento para formalizar la aceptaci√≥n de una propuesta.",
            "Dise√±a una encuesta post-servicio para medir satisfacci√≥n del cliente."
          ]
        }
      ]
    },

    // 4Ô∏è‚É£ Reportes y Dashboards
    {
      title: "üìà Reportes y Dashboards",
      subcategories: [
        {
          title: "KPIs Financieros",
          prompts: [
            "Dise√±a un tablero que muestre m√°rgenes y ratios clave.",
            "Crea indicadores de liquidez operativa para an√°lisis mensual.",
            "Elabora m√©tricas de productividad y eficiencia contable."
          ]
        },
        {
          title: "Visualizaci√≥n de Datos",
          prompts: [
            "Dise√±a un panel visual con los principales indicadores financieros.",
            "Crea gr√°ficos que comparen desempe√±o hist√≥rico.",
            "Genera una presentaci√≥n con resultados visuales clave."
          ]
        },
        {
          title: "Alertas y Seguimiento",
          prompts: [
            "Crea un esquema de alertas financieras autom√°ticas.",
            "Dise√±a un formato breve de reporte semanal de desempe√±o.",
            "Redacta un resumen de riesgos detectados con alertas tempranas."
          ]
        },
        {
          title: "Control y Auditor√≠a de Datos",
          prompts: [
            "Crea un procedimiento para validar la integridad de datos.",
            "Dise√±a un sistema de control de versiones de reportes.",
            "Genera una lista de verificaci√≥n previa a entrega de informes."
          ]
        },
        {
          title: "Reportes Personalizados",
          prompts: [
            "Crea un formato est√°ndar para reportes mensuales.",
            "Genera un informe financiero por departamentos.",
            "Dise√±a un reporte con enfoque estrat√©gico para la direcci√≥n."
          ]
        }
      ]
    },

    // 5Ô∏è‚É£ Cumplimiento Fiscal
    {
      title: "üßæ Cumplimiento Fiscal",
      subcategories: [
        {
          title: "Declaraciones y Pagos",
          prompts: [
            "Genera un calendario fiscal con fechas clave e impuestos a declarar.",
            "Prepara una declaraci√≥n mensual con resumen de impuestos.",
            "Calcula una proyecci√≥n de pagos fiscales anuales."
          ]
        },
        {
          title: "Auditor√≠as y Revisiones",
          prompts: [
            "Crea un checklist de auditor√≠a fiscal.",
            "Genera un expediente con documentaci√≥n tributaria obligatoria.",
            "Redacta un resumen de observaciones detectadas en auditor√≠as."
          ]
        },
        {
          title: "Optimizaci√≥n Tributaria",
          prompts: [
            "Identifica deducciones aplicables al r√©gimen fiscal actual.",
            "Elabora un plan para reducir carga fiscal de forma legal.",
            "Eval√∫a riesgos fiscales y contingencias potenciales."
          ]
        },
        {
          title: "Cumplimiento Normativo",
          prompts: [
            "Crea un checklist de obligaciones fiscales mensuales.",
            "Dise√±a un reporte de cumplimiento fiscal y observaciones.",
            "Redacta un plan para corregir incumplimientos fiscales."
          ]
        },
        {
          title: "Documentaci√≥n Legal",
          prompts: [
            "Redacta una carta formal que confirme cumplimiento de obligaciones.",
            "Crea una plantilla editable para futuras declaraciones.",
            "Elabora un resumen con los principales marcos regulatorios aplicables."
          ]
        }
      ]
    },

    // 6Ô∏è‚É£ Auditor√≠a y Control
    {
      title: "üïµÔ∏è Auditor√≠a y Control",
      subcategories: [
        {
          title: "Controles Internos",
          prompts: [
            "Dise√±a un mapa de riesgos operativos y financieros.",
            "Aplica una evaluaci√≥n del sistema de control interno.",
            "Redacta procedimientos para fortalecer el control interno."
          ]
        },
        {
          title: "Auditor√≠a Operativa",
          prompts: [
            "Desarrolla un plan anual de auditor√≠a con objetivos y cronograma.",
            "Elabora un informe ejecutivo de hallazgos y mejoras.",
            "Dise√±a un formato de seguimiento de acciones correctivas."
          ]
        },
        {
          title: "Gesti√≥n de Riesgos",
          prompts: [
            "Construye una matriz de riesgos con nivel de impacto y probabilidad.",
            "Eval√∫a controles existentes frente a riesgos detectados.",
            "Desarrolla un plan para reducir la exposici√≥n a riesgos clave."
          ]
        },
        {
          title: "Revisi√≥n de Procesos",
          prompts: [
            "Crea un diagrama de procesos contables principales.",
            "Dise√±a una lista de verificaci√≥n de cumplimiento interno.",
            "Prop√≥n mejoras para optimizar procesos administrativos."
          ]
        },
        {
          title: "Auditor√≠a Interna",
          prompts: [
            "Crea un programa de auditor√≠as internas con enfoque estrat√©gico.",
            "Dise√±a un registro de hallazgos y estado de resoluci√≥n.",
            "Redacta un resumen de cumplimiento normativo y financiero."
          ]
        }
      ]
    },

    // 7Ô∏è‚É£ Clientes Internacionales
    {
      title: "üåç Clientes Internacionales",
      subcategories: [
        {
          title: "Normas Internacionales",
          prompts: [
            "Elabora una tabla comparativa entre IFRS y US GAAP.",
            "Dise√±a un proceso para adaptar reportes contables internacionales.",
            "Crea un modelo de reporte financiero en distintas monedas."
          ]
        },
        {
          title: "Gesti√≥n Global",
          prompts: [
            "Crea lineamientos para comunicaci√≥n intercultural.",
            "Dise√±a estrategias para coordinaci√≥n internacional.",
            "Genera un calendario de obligaciones globales."
          ]
        },
        {
          title: "Fiscalidad Internacional",
          prompts: [
            "Desarrolla un resumen de pol√≠tica de precios de transferencia.",
            "Crea un checklist de cumplimiento internacional.",
            "Genera un resumen consolidado de obligaciones fiscales."
          ]
        },
        {
          title: "Contratos Internacionales",
          prompts: [
            "Redacta un modelo de contrato de servicios globales.",
            "Crea una versi√≥n en ingl√©s y espa√±ol de un NDA.",
            "Genera una carta formal para acuerdos entre pa√≠ses."
          ]
        },
        {
          title: "Auditor√≠a Global",
          prompts: [
            "Dise√±a un plan coordinado de auditor√≠a global.",
            "Crea un reporte que integre datos financieros de varias filiales.",
            "Elabora una matriz de riesgos con visi√≥n internacional."
          ]
        }
      ]
    }
  ];

  const handleCopy = (text) => {
    navigator.clipboard.writeText(text);
    alert("‚úÖ Prompt copiado");
  };

  return (
    <div className="test-section">
      <h1>üß™ Secci√≥n de Pruebas</h1>
      <p className="intro">
        Aqu√≠ puedes experimentar con una nueva estructura completa sin afectar el MVP actual.
      </p>

      {/* Categor√≠as */}
      {!activeCategory && (
        <div className="category-list">
          {testPrompts.map((cat, i) => (
            <button
              key={i}
              className="category-btn"
              onClick={() => setActiveCategory(cat)}
            >
              {cat.title}
            </button>
          ))}
        </div>
      )}

      {/* Subcategor√≠as */}
      {activeCategory && !activeSubcategory && (
        <div className="subcategory-list">
          <button
            className="back-button"
            onClick={() => setActiveCategory(null)}
          >
            ‚¨Ö Volver
          </button>
          {activeCategory.subcategories.map((sub, i) => (
            <div
              key={i}
              className="subcategory-card"
              onClick={() => setActiveSubcategory(sub)}
            >
              {sub.title}
            </div>
          ))}
        </div>
      )}

      {/* Prompts */}
      {activeSubcategory && (
        <div className="prompt-list">
          <button
            className="back-button"
            onClick={() => setActiveSubcategory(null)}
          >
            ‚¨Ö Volver
          </button>
          {activeSubcategory.prompts.map((p, i) => (
            <div key={i} className="prompt-card">
              <p>{p}</p>
              <button onClick={() => handleCopy(p)}>Copiar</button>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
