// src/components/FullPromptsSection.jsx
import React, { useEffect, useState } from "react";
import promptsFull from "../promptsFull.json";
import "./TestSection.css";

function FullPromptsSection() {
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [selectedSubcategory, setSelectedSubcategory] = useState(null);
  const [searchTerm, setSearchTerm] = useState("");
  const [searchResults, setSearchResults] = useState([]);

  useEffect(() => {
    window.scrollTo(0, 0);
  }, []);

  // --- Manejo de búsqueda ---
  const handleSearch = (e) => {
    const term = e.target.value.toLowerCase();
    setSearchTerm(term);

    if (term === "") {
      setSearchResults([]);
      return;
    }

    const results = [];
    promptsFull.forEach((cat) => {
      cat.subcategories.forEach((sub) => {
        sub.prompts.forEach((p) => {
          if (
            p.title.toLowerCase().includes(term) ||
            p.prompt.toLowerCase().includes(term)
          ) {
            results.push(p);
          }
        });
      });
    });
    setSearchResults(results);
  };

  // --- Copiar prompt ---
  const handleCopy = (text) => {
    navigator.clipboard.writeText(text);
    alert("✅ Prompt copiado al
